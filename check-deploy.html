<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√©rification D√©ploiement SafeMates</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
        }
        .status {
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid;
        }
        .success {
            background: #22c55e22;
            border-color: #22c55e;
        }
        .error {
            background: #ef444422;
            border-color: #ef4444;
        }
        .info {
            background: #3b82f622;
            border-color: #3b82f6;
        }
        h1 { color: #22c55e; }
        code {
            background: #2a2a3e;
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üîç V√©rification du D√©ploiement</h1>

    <div class="status info">
        <h2>üìå Derni√®re version Git</h2>
        <p><strong>Commit:</strong> <code>299e642</code></p>
        <p><strong>Date:</strong> 2026-01-11 21:13:00</p>
    </div>

    <div class="status" id="conceptCheck">
        <h2>‚úì Bouton "Concept" supprim√© ?</h2>
        <p id="conceptResult">V√©rification en cours...</p>
    </div>

    <div class="status" id="titleCheck">
        <h2>‚úì Titre "Jeux" (pas "Biblioth√®que de jeux") ?</h2>
        <p id="titleResult">V√©rification en cours...</p>
    </div>

    <div class="status" id="cacheCheck">
        <h2>‚úì Version du cache CSS/JS ?</h2>
        <p id="cacheResult">V√©rification en cours...</p>
    </div>

    <div class="status info">
        <h2>üìù Instructions</h2>
        <p>Si vous voyez des ‚ùå ci-dessus :</p>
        <ol>
            <li>V√©rifiez dans <strong>Hostinger ‚Üí Git ‚Üí D√©ploiements</strong></li>
            <li>Assurez-vous que le dernier commit <code>299e642</code> est d√©ploy√©</li>
            <li>Si non, cliquez sur <strong>"Red√©ployer"</strong></li>
            <li>Attendez 1-2 minutes et rechargez cette page</li>
        </ol>
    </div>

    <script>
        // V√©rifier le bouton Concept
        fetch('/dashboard')
            .then(res => res.text())
            .then(html => {
                const hasConcept = html.includes('Concept');
                const conceptEl = document.getElementById('conceptCheck');
                const conceptResult = document.getElementById('conceptResult');

                if (!hasConcept) {
                    conceptEl.className = 'status success';
                    conceptResult.innerHTML = '‚úÖ <strong>OK</strong> - Le bouton "Concept" a bien √©t√© supprim√©';
                } else {
                    conceptEl.className = 'status error';
                    conceptResult.innerHTML = '‚ùå <strong>ERREUR</strong> - Le bouton "Concept" est encore pr√©sent. D√©ploiement non effectu√©.';
                }
            });

        // V√©rifier le titre "Jeux"
        fetch('/dashboard')
            .then(res => res.text())
            .then(html => {
                const hasJeux = html.includes('<h2>Jeux</h2>');
                const hasBibliotheque = html.includes('Bibliotheque de jeux');
                const titleEl = document.getElementById('titleCheck');
                const titleResult = document.getElementById('titleResult');

                if (hasJeux && !hasBibliotheque) {
                    titleEl.className = 'status success';
                    titleResult.innerHTML = '‚úÖ <strong>OK</strong> - Le titre est bien "Jeux"';
                } else {
                    titleEl.className = 'status error';
                    titleResult.innerHTML = '‚ùå <strong>ERREUR</strong> - Le titre est encore "Biblioth√®que de jeux". D√©ploiement non effectu√©.';
                }
            });

        // V√©rifier la version du cache
        fetch('/dashboard')
            .then(res => res.text())
            .then(html => {
                const versionMatch = html.match(/style\.css\?v=(\d+)/);
                const cacheEl = document.getElementById('cacheCheck');
                const cacheResult = document.getElementById('cacheResult');

                if (versionMatch) {
                    const version = versionMatch[1];
                    const expectedVersion = '1768163584348';

                    if (version === expectedVersion) {
                        cacheEl.className = 'status success';
                        cacheResult.innerHTML = `‚úÖ <strong>OK</strong> - Version du cache : <code>${version}</code>`;
                    } else {
                        cacheEl.className = 'status error';
                        cacheResult.innerHTML = `‚ö†Ô∏è <strong>ATTENTION</strong> - Version du cache : <code>${version}</code> (attendue: <code>${expectedVersion}</code>)`;
                    }
                } else {
                    cacheEl.className = 'status error';
                    cacheResult.innerHTML = '‚ùå <strong>ERREUR</strong> - Aucune version de cache d√©tect√©e';
                }
            });
    </script>
</body>
</html>
